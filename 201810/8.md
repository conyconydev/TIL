# 2018 10 08

### 구현

```swift
//
//  main.swift
//  newCal
//
//  Created by Elena on 08/10/2018.
//  Copyright © 2018 elena. All rights reserved.
//

import Foundation

let unit:[String : Double] = ["cm" : 100 , "m" : 100 , "inch" : 2.54 , "yard" : 0 ]

// 값 분할
// 입력받은것중 앞에 숫자 , 사용자단위 , 변환 단위 쪼개기
func cutValue(_ userLine: String ) ->(number : String ,userUnit : String, conversionUnit : String) {
    // userValue는 userLine 입력받은게 123cm m 이니깐 공백으로 두개를 분리하기 위해.
    let userValue = userLine.split(separator:" ").map{ String($0) }
    
    //사용자의 숫자와단위를 str 변수에 저장해서 반복문을 돌리기 위해 변수에 저장
    let str = userValue[0]
    //앞에서부터 숫자가 몇개인지 판별하기 위해
    var num = 0
    // 숫자랑, 단위 저장할 변수 선언
    var number : String = ""
    var userUnit : String = ""
    
    // 아스키코드 값으로 숫자를 판별할려고 반복문 설치
    for index in str.utf16 {
        if index >= 48 , index <= 57 {
            num += 1
        }
    }
    
    // 문자 하나씩 접근해서 숫자랑 문자랑 나누려고 사용
    for i in str.indices {
        if num > 0 {
            number.append(str[i])
            num -= 1
        }else {
            userUnit.append(str[i])
        }
    }
    if userValue[1].isEmpty {
        return (number , userUnit , userUnit)
    }
    
    return (number,userUnit,userValue[1])
}

// 단위 변환 함수 정의
//            사용자가 변환할 숫자 데이터 , 사용자가 변환하기전 단위 , 사용자가 바꿀 단위
func changeUnit(_ number : String , _ userUnit : String , _ conversionUnit : String ) -> Double {
    
    // 이 아래 부분도 함수로 빼서 select 라는 함수를 만들면 될것 같음.
    if userUnit == "cm" {
        switch conversionUnit {
        case "cm":
            return  Double(number)!

        case "m":
            // 사용자가 변환하기 전 단위를 검사하고 , 숫자랑 바꿀 단위값만 넘기면 되자나? , 곱하기냐 나누기냐 던지자.
            return checkSumValue(Double(number)! , unit[conversionUnit]! , 2)
        default:
            return 9
        }
    }else if userUnit == "m" {
        switch conversionUnit {
        case "cm":
            return checkSumValue(Double(number)! , unit[conversionUnit]! , 1)
        case "m":
            return checkSumValue(Double(number)! , unit[conversionUnit]! , 1)
        default:
            return 9
        }
    }else {
        return 9
    }
    
}
func selectUnit(_ userUnit: String, _ conversionUnit: String) {
    
}
// 값을 곱하고 나누기할꺼인데.... 여기서 단위까지 넘겨주기로 한다. 매개변수로....
// 곱하기는 1번 나누기는 2번으로 하자.
func checkSumValue(_ number : Double , _ conversionUnit : Double ,_ calculateFlag : Int) -> Double{
    print(number , conversionUnit)
    if calculateFlag == 1 {
        // 곱하기
        return number * conversionUnit
    }else if calculateFlag == 2 {
        // 나누기
        return number / conversionUnit
    }else {
        return 9
    }
    
}

func printUnit(_ state : Int) {
    
    switch state {
    case 0 :
        print("---단위 변환기---\n")
        print(" 길이와 단위를 입력해주세요 : 예) 123cm m  , q 입력시 종료 \n ")
    case 1:
        print("")
    case 2:
        print("")
    default:
        print("잘못 입력했음. 다시 확인하세요.")
    }
}


// test code
//var printmoon = cutValue(userLine!)
//print(printmoon)
//var printResult = changeUnit(printmoon.number, printmoon.userUnit,printmoon.conversionUnit)
//print("-------end------")

while true {
    printUnit(0)
    let userLine = readLine()!
    if userLine == "q" {
        break
    }
    
    
    var result = cutValue(userLine)
    var value = changeUnit(result.number, result.userUnit, result.conversionUnit)
}

```

```swift
//
//  main.swift
//  newCal
//
//  Created by Elena on 08/10/2018.
//  Copyright © 2018 elena. All rights reserved.
//

import Foundation

struct Units {
    static let lengthDic: [String : Double] = ["cm": 1, "m": 100, "inch": 2.54, "yard": 91.44]
    static let weightDic: [String : Double] = ["kg": 1000, "g": 1, "lb": 2.205, "oz": 35.274]
    static let err: [String : Double] = ["null": 9]
}

let unit:[String : Double] = ["cm" : 100 , "m" : 100 , "inch" : 2.54 , "yard" : 91.44 ]
let weight:[String : Double] = ["g" : 1000 , "kg" : 1000 , "oz" : 35.274 , "lb" : 2.205]

func splitUserInputLine(_ userLine: String ) ->(number : String ,userUnit : String, conversionUnit : String) {
    
    var userValue = userLine.split(separator:" ").map{ String($0) }

    let userData = userValue[0]
    var numberOfCount = 0
    var number : String = ""
    var userUnit : String = ""
    
    for index in userData.utf16 {
        if index >= 48 , index <= 57 {
            numberOfCount += 1
        }else if index == 46 {
            numberOfCount += 1
        }
    }
    for i in userData.indices {
        if numberOfCount > 0 {
            number.append(userData[i])
            numberOfCount -= 1
        }else {
            userUnit.append(userData[i])
        }
    }
    // 위에 껄 아래꺼 활용해서 짜도 될것같다.
    //Array(userData.utf16[...])
    
    
    
    if userValue.count == 1 {
        return (number, userUnit, userUnit)
    }

    return (number,userUnit,userValue[1])
}

func changeUnit(_ number : String , _ userUnit : String , _ conversionUnit : String ) -> (number : Double, unit: String) {
    
    if userUnit == "cm" {
        switch conversionUnit {
        case "cm":
            return (checkSumValue(Double(number)! , unit[conversionUnit]! , 2),"m")
        case "m":
            return (checkSumValue(Double(number)! , unit[conversionUnit]! , 2),conversionUnit)
        case "inch":
            return (checkSumValue(Double(number)! , unit[conversionUnit]! , 2),conversionUnit)
        case "yard":
            return (checkSumValue(Double(number)!, unit[conversionUnit]!, 2),conversionUnit)
        default:
            return (9,"null")
        }
    }else if userUnit == "m" {
        switch conversionUnit {
        case "cm":
            return (checkSumValue(Double(number)! , unit[conversionUnit]! , 1),conversionUnit)
        case "m":
            return (checkSumValue(Double(number)! , unit[conversionUnit]! , 1),"cm")
        case "yard":
            let cmOfValue = changeUnit(number, "m" , "cm")
            let result = changeUnit(String(cmOfValue.number), "cm", "yard")
            return (result.number,result.unit)
            
        default:
            return (9,"null")
        }
    }else if userUnit == "inch" {
        switch conversionUnit {
        case "cm" :
            return (checkSumValue(Double(number)! , unit["inch"]! , 1),conversionUnit)
        case "m":
            let cmOfValue = changeUnit(number , "inch" , "cm" )
            let result = changeUnit(String(cmOfValue.number), "cm" , "m" )
            return (result.number,result.unit)
        case "inch":
            return (9,"null")
        default:
            return (9,"null")
        }
    }else if userUnit == "yard" {
        switch conversionUnit {
        case "cm" :
            return (9,"null")
        case "m":
            return (9,"null")
        case "inch" :
            return (9,"null")
        case "yard":
            return (checkSumValue(Double(number)!, 1.094, 2),"m")
        default:
            return (9,"null")
        }
    }else if userUnit == "g" {
        switch conversionUnit {
        case "kg":
            return (checkSumValue(Double(number)!,weight[conversionUnit]! , 2),conversionUnit)
        default:
            return (9,"null")
        }
    }else if userUnit == "kg" {
        switch conversionUnit {
        case "g":
            return (checkSumValue(Double(number)!,weight[conversionUnit]! , 1),conversionUnit)
        case "oz":
            return (checkSumValue(Double(number)!,weight[conversionUnit]! , 1),conversionUnit)
        default:
            return (9,"null")
        }
        
    }else if userUnit == "lb" {
        switch conversionUnit {
        case "kg":
            return (checkSumValue(Double(number)!,weight["lb"]! , 2),conversionUnit)
        default:
            return (9,"null")
        }
        
    }else if userUnit == "oz" {
        switch conversionUnit {
        case "kg":
            return (checkSumValue(Double(number)!,weight["oz"]! , 2),conversionUnit)
        default:
            return (9,"null")
        }
        
    }else {
        return (9,"null")
    }
    
}

func checkSumValue(_ number : Double , _ conversionUnit : Double ,_ calculateFlag : Int) -> Double{
    if calculateFlag == 1 {
        return number * conversionUnit
    }else if calculateFlag == 2 {
        return number / conversionUnit
    }else {
        return 9
    }
    
}

func printUnit(state : Double,unit:String) {
    
    switch state {
    case 0 :
        print("---단위 변환기---\n")
        for unit in Units.lengthDic.keys {
            print("\(unit) ", terminator:"")
        }
        print("")
        for unit in Units.weightDic.keys {
            print("\(unit) ", terminator:"")
        }
        print("\n")
        print(" 길이와 단위를 입력해주세요 : 예) 123cm m  , q 입력시 종료")
    case 9:
        print("잘못 입력했음. 다시 확인하세요.")
    default:
        print("\(state)\(unit)")
    }
}
// 공백일 경우 : 지원하지 않는 단위
func blankUnit(_ unit: String?) -> Bool {
    return  unit == nil ? true : false
}

func readUserLine() -> (userData : String,flagNull :Bool) {
    printUnit(state : 0, unit: "start")
    let userData = readLine()
    let flagNull = blankUnit(userData)
    return (userData!,flagNull)
}

while true {
    let startflag = readUserLine()
    if  startflag.userData == "q" || startflag.flagNull == false {
        break
    }
    
    let result = splitUserInputLine(startflag.userData)
    let value = changeUnit(result.number, result.userUnit, result.conversionUnit)
    printUnit(state: value.number,unit: value.unit)
    
}

```

